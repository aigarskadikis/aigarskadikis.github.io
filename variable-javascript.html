<!DOCTYPE html>
    <body>
        <pre id="output"></pre>

        <div id="config">
            <label>IP:
                <input class="output-replace" name="{DB_IP}" value="" data-default="***">
            </label>
            <label>User:
                <input class="output-replace" name="{DB_USER}" value="">
            </label>
        </div>
<style>
* { margin:0; padding:0; }
#output { margin: 0 0 20px; min-height: 30vh; background-color: whitesmoke;  }
#config { padding: 10px; border: 1px solid silver; }
#config label { display: block; margin-bottom: 3px; }
</style>
<script>
let dom = document.getElementById('output');
let messages = [
    "CREATE USER '{DB_USER}'@'{DB_IP}' IDENTIFIED BY 'password'",
    '// this will create database user {DB_USER}'
];
let placeholders = document.querySelectorAll('.output-replace');

document.getElementById('config').addEventListener('change', e => {
    if (!e.target.classList.contains('output-replace')) {
        return;
    }

    updateOuput(dom, messages);
});
document.getElementById('config').addEventListener('keyup', e => {
    console.log('keyup');
    if (!e.target.classList.contains('output-replace')) {
        return;
    }

    updateOuput(dom, messages)
});
updateOuput(dom, messages);

function updateOuput(dom, messages) {
    

    let output = messages.join("\r\n");
    let key, value;

    for (let placeholder of placeholders) {
        key = new RegExp(placeholder.getAttribute('name'), 'g');
        value = placeholder.value;

        if (value == '' && placeholder.hasAttribute('data-default')) {
            value = placeholder.getAttribute('data-default');
        }

        output = output.replace(key, value);
    }

    dom.innerHTML = output;
}
</script>
    </body>
</html>